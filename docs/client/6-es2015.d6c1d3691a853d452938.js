(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/mPg":function(t,e,s){"use strict";s.r(e),s.d(e,"TasksModule",(function(){return v}));var i=s("ofXK"),a=s("tyNb"),r=s("ZLyn"),n=s("3Pt+"),o=s("fXoL"),c=s("AytR"),d=s("tk/3");let l=(()=>{class t{constructor(t){this.http=t}getTasks(){return this.http.get(c.a.API_URL+"/tasks")}getUserTasks(t,e){return this.http.get(c.a.API_URL+"/tasks/"+t+"/"+e)}getTask(t){return this.http.get(c.a.API_URL+"/tasks/"+t)}deleteTask(t){return this.http.delete(c.a.API_URL+"/tasks/"+t)}saveTask(t){return this.http.post(c.a.API_URL+"/tasks/",t)}updateTask(t,e){return this.http.put(c.a.API_URL+"/tasks/"+t,e)}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(d.a))},t.\u0275prov=o.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),b=(()=>{class t{constructor(t,e,s,i){this.tasksServices=t,this.activatedRouted=e,this.router=s,this.formBuilder=i,this.alerts=new r.a,this.task={},this.user={},this.user=JSON.parse(localStorage.getItem("userLogged"))}ngOnInit(){const t=this.activatedRouted.snapshot.params;t.id&&this.tasksServices.getTask(Number(t.id)).subscribe(t=>{this.task=t,this.taskForm.setValue(this.task),this.edit=!0},()=>this.alerts.showAlert("Error","Task not found!","error").then(t=>{(t.value||t.dismiss)&&this.router.navigate(["tasks"])})),this.createTaskForm()}updateTask(){delete this.taskForm.value.created_at,this.tasksServices.updateTask(this.task.id,this.taskForm.value).subscribe(()=>{this.alerts.showAlert("Yeah!","The task was updated successfully!","success").then(t=>{(t.value||t.dismiss)&&this.router.navigate(["tasks"])})})}saveNewTask(){delete this.task.id,delete this.task.created_at;const t=Object.assign(Object.assign({},this.task),this.taskForm.value);t.assignment=this.user.name+" "+this.user.last_name,t.id_user=this.user.id,this.tasksServices.saveTask(t).subscribe(()=>{this.alerts.showAlert("Yeah!","The task was added successfully!","success").then(t=>{(t.value||t.dismiss)&&this.router.navigate(["tasks"])})})}createTaskForm(){this.taskForm=this.formBuilder.group({id:new n.d(this.task.id,[]),assignment:new n.d({value:this.user.name+" "+this.user.last_name,disabled:!0},[n.n.required]),title:new n.d(this.task.title,[n.n.minLength(4),n.n.maxLength(30)]),description:new n.d(this.task.description,[n.n.minLength(4),n.n.maxLength(100)]),points:new n.d(this.task.points,[n.n.min(1),n.n.max(21)]),created_at:new n.d(this.task.created_at,[]),completed:new n.d(this.task.completed,[]),id_user:[this.task.completed]})}}return t.\u0275fac=function(e){return new(e||t)(o.Jb(l),o.Jb(a.a),o.Jb(a.b),o.Jb(n.c))},t.\u0275cmp=o.Db({type:t,selectors:[["app-task-form"]],decls:35,vars:31,consts:[[1,"col-md-4","mx-auto","left-effect",3,"formGroup"],[1,"text-center"],[1,"form-group"],["for","assignment"],["type","text","id","assignment","name","assignment","formControlName","assignment",1,"form-control"],["for","title"],["type","text","id","title","name","title","formControlName","title",1,"form-control"],[1,"invalid-feedback"],["for","points"],["type","number","min","1","max","21","maxlength","2","id","points","name","points","formControlName","points",1,"form-control"],["for","description"],["type","text","id","description","name","description","formControlName","description",1,"form-control"],[1,"form-check","text-center"],["type","checkbox","name","completed","id","completed","formControlName","completed",1,"form-check-input"],["for","completed"],[1,"btn","btn-success","btn-block",3,"disabled","click"],["type","hidden","id","idHidden",3,"value"],["type","hidden","id","dateHidden",3,"value"]],template:function(t,e){1&t&&(o.Mb(0,"form",0),o.Mb(1,"h3",1),o.hc(2),o.Lb(),o.Kb(3,"hr"),o.Mb(4,"div",2),o.Mb(5,"label",3),o.hc(6,"Assignment"),o.Lb(),o.Kb(7,"input",4),o.Lb(),o.Mb(8,"div",2),o.Mb(9,"label",5),o.hc(10,"Title"),o.Lb(),o.Kb(11,"input",6),o.Mb(12,"div",7),o.hc(13),o.Lb(),o.Lb(),o.Mb(14,"div",2),o.Mb(15,"label",8),o.hc(16,"Points"),o.Lb(),o.Kb(17,"input",9),o.Mb(18,"div",7),o.hc(19),o.Lb(),o.Lb(),o.Mb(20,"div",2),o.Mb(21,"label",10),o.hc(22,"Description"),o.Lb(),o.Kb(23,"textarea",11),o.Mb(24,"div",7),o.hc(25),o.Lb(),o.Lb(),o.Mb(26,"div",12),o.Kb(27,"input",13),o.Mb(28,"label",14),o.hc(29,"Completed"),o.Lb(),o.Lb(),o.Mb(30,"button",15),o.Tb("click",(function(){return e.edit?e.updateTask():e.saveNewTask()})),o.Kb(31,"i"),o.hc(32),o.Lb(),o.Kb(33,"input",16),o.Kb(34,"input",17),o.Lb()),2&t&&(o.Zb("formGroup",e.taskForm),o.xb(2),o.ic(e.edit?"Edit task":"New task"),o.xb(5),o.Bb("is-invalid",e.taskForm.get("assignment").invalid)("is-valid",e.taskForm.get("assignment").value),o.xb(4),o.Bb("is-invalid",e.taskForm.get("title").invalid)("is-valid",e.taskForm.get("title").valid&&e.taskForm.get("title").value),o.xb(2),o.kc(" ",e.taskForm.get("title").hasError("minlength")?"The title too short":""," ",e.taskForm.get("title").hasError("maxlength")?"The maximum length is 30 characters":""," "),o.xb(4),o.Bb("is-invalid",e.taskForm.get("points").invalid)("is-valid",e.taskForm.get("points").valid&&e.taskForm.get("points").value),o.xb(2),o.kc(" ",e.taskForm.get("points").hasError("min")?"Very few points!":""," ",e.taskForm.get("points").hasError("max")?"Too many points!":""," "),o.xb(4),o.Bb("is-invalid",e.taskForm.get("description").invalid)("is-valid",e.taskForm.get("description").valid&&e.taskForm.get("description").value),o.xb(2),o.kc(" ",e.taskForm.get("description").hasError("minlength")?"The description too short":""," ",e.taskForm.get("description").hasError("maxlength")?"The maximum length is 100 characters":""," "),o.xb(5),o.Zb("disabled",e.taskForm.invalid||!e.taskForm.get("assignment").value||!e.taskForm.get("title").value||!e.taskForm.get("points").value||!e.taskForm.get("description").value),o.xb(1),o.zb(e.edit?"zmdi zmdi-refresh zmdi-hc-lg":"zmdi zmdi-save zmdi-hc-lg"),o.xb(1),o.jc(" ",e.edit?" Update":" Save"," "),o.xb(1),o.ac("value",e.taskForm.get("id").value),o.xb(1),o.ac("value",e.taskForm.get("created_at").value))},directives:[n.p,n.j,n.f,n.b,n.i,n.e,n.l,n.h,n.a],styles:[""]}),t})();function h(t,e){if(1&t){const t=o.Nb();o.Mb(0,"div",2),o.hc(1," Backlog empty "),o.Mb(2,"a",3),o.Tb("click",(function(){return o.cc(t),o.Wb().addTask()})),o.hc(3," add a task"),o.Lb(),o.hc(4," to the list!\n"),o.Lb()}}function m(t,e){if(1&t){const t=o.Nb();o.Mb(0,"div",4),o.Mb(1,"div",5),o.Mb(2,"div",6),o.Mb(3,"a"),o.hc(4),o.Lb(),o.Mb(5,"button",7),o.Tb("click",(function(){o.cc(t);const s=e.$implicit;return o.Wb().deleteTask(s.id)})),o.Kb(6,"i",8),o.hc(7," Delete "),o.Lb(),o.Lb(),o.Mb(8,"div",9),o.Mb(9,"h3",10),o.hc(10),o.Lb(),o.Mb(11,"h5",11),o.hc(12),o.Lb(),o.Mb(13,"h5",12),o.hc(14),o.Lb(),o.Mb(15,"h4",13),o.hc(16),o.Xb(17,"date"),o.Lb(),o.Mb(18,"h5",14),o.hc(19),o.Lb(),o.Lb(),o.Mb(20,"div",15),o.Mb(21,"button",16),o.Tb("click",(function(){o.cc(t);const s=e.$implicit;return o.Wb().editTask(s.id)})),o.Kb(22,"i",17),o.hc(23," Edit "),o.Lb(),o.Lb(),o.Kb(24,"input",18),o.Kb(25,"input",19),o.Lb(),o.Lb()}if(2&t){const t=e.$implicit;o.xb(4),o.ic(t.title),o.xb(6),o.ic(t.assignment),o.xb(2),o.jc("",t.points," points"),o.xb(2),o.ic(t.description),o.xb(2),o.jc(" ",o.Yb(17,8,t.created_at,"dd-MM-yyyy hh:mm")," "),o.xb(3),o.ic(t.completed?"Completed":"Incomplete"),o.xb(5),o.ac("value",t.id),o.xb(1),o.ac("value",t.created_at)}}let u=(()=>{class t{constructor(t,e){this.tasksServices=t,this.router=e,this.classes="row",this.tasks=[],this.user={},this.alerts=new r.a}ngOnInit(){this.getUserTasks()}getUserTasks(){this.user=JSON.parse(localStorage.getItem("userLogged")),this.tasksServices.getUserTasks(this.user.username,this.user.id).subscribe(t=>{this.tasks=t})}deleteTask(t){this.alerts.showAlertConfirm("Are you sure?","Once deleted, you will not be able to recover this task!","warning").then(e=>{e.value&&(this.tasksServices.deleteTask(t).subscribe(t=>{console.log(t),this.getUserTasks()}),this.alerts.showAlert("Yeah!","Task was deleted!","success"))})}editTask(t){this.router.navigateByUrl("tasks/edit/"+t)}addTask(){this.router.navigate(["tasks/add"])}}return t.\u0275fac=function(e){return new(e||t)(o.Jb(l),o.Jb(a.b))},t.\u0275cmp=o.Db({type:t,selectors:[["app-task-list"]],hostVars:2,hostBindings:function(t,e){2&t&&o.zb(e.classes)},decls:2,vars:2,consts:[["class","alert alert-info text-center col-md-12","role","alert",4,"ngIf"],["class","col-md-4",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-info","text-center","col-md-12"],[1,"alert-link",2,"cursor","pointer",3,"click"],[1,"col-md-4"],[1,"card"],[1,"card-header","bg-dark","text-white","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"zmdi","zmdi-delete","zmdi-hc-lg"],[1,"card-body"],["id","assignment"],["id","points"],["id","description"],["id","created_at"],["id","completed"],[1,"card-footer"],[1,"btn","btn-info","btn-block",3,"click"],[1,"zmdi","zmdi-edit","zmdi-hc-lg"],["type","hidden","id","idHidden",3,"value"],["type","hidden","id","dateHidden",3,"value"]],template:function(t,e){1&t&&(o.gc(0,h,5,0,"div",0),o.gc(1,m,26,11,"div",1)),2&t&&(o.Zb("ngIf",e.tasks.length<1),o.xb(1),o.Zb("ngForOf",e.tasks))},directives:[i.j,i.i],pipes:[i.d],styles:[""]}),t})();var k=s("BhFI");const p=[{path:"",component:u,canActivate:[k.a]},{path:"add",component:b,canActivate:[k.a]},{path:"edit/:id",component:b,canActivate:[k.a]}];let g=(()=>{class t{}return t.\u0275mod=o.Hb({type:t}),t.\u0275inj=o.Gb({factory:function(e){return new(e||t)},imports:[[a.f.forChild(p)],a.f]}),t})(),v=(()=>{class t{}return t.\u0275mod=o.Hb({type:t}),t.\u0275inj=o.Gb({factory:function(e){return new(e||t)},imports:[[i.b,g,n.g,n.m]]}),t})()}}]);