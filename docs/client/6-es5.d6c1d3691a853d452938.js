!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function i(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/mPg":function(e,s,a){"use strict";a.r(s),a.d(s,"TasksModule",(function(){return F}));var n,r,o=a("ofXK"),c=a("tyNb"),d=a("ZLyn"),l=a("3Pt+"),u=a("fXoL"),b=a("AytR"),h=a("tk/3"),m=((r=function(){function e(i){t(this,e),this.http=i}return i(e,[{key:"getTasks",value:function(){return this.http.get(b.a.API_URL+"/tasks")}},{key:"getUserTasks",value:function(t,e){return this.http.get(b.a.API_URL+"/tasks/"+t+"/"+e)}},{key:"getTask",value:function(t){return this.http.get(b.a.API_URL+"/tasks/"+t)}},{key:"deleteTask",value:function(t){return this.http.delete(b.a.API_URL+"/tasks/"+t)}},{key:"saveTask",value:function(t){return this.http.post(b.a.API_URL+"/tasks/",t)}},{key:"updateTask",value:function(t,e){return this.http.put(b.a.API_URL+"/tasks/"+t,e)}}]),e}()).\u0275fac=function(t){return new(t||r)(u.Qb(h.a))},r.\u0275prov=u.Fb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),k=((n=function(){function e(i,s,a,n){t(this,e),this.tasksServices=i,this.activatedRouted=s,this.router=a,this.formBuilder=n,this.alerts=new d.a,this.task={},this.user={},this.user=JSON.parse(localStorage.getItem("userLogged"))}return i(e,[{key:"ngOnInit",value:function(){var t=this,e=this.activatedRouted.snapshot.params;e.id&&this.tasksServices.getTask(Number(e.id)).subscribe((function(e){t.task=e,t.taskForm.setValue(t.task),t.edit=!0}),(function(){return t.alerts.showAlert("Error","Task not found!","error").then((function(e){(e.value||e.dismiss)&&t.router.navigate(["tasks"])}))})),this.createTaskForm()}},{key:"updateTask",value:function(){var t=this;delete this.taskForm.value.created_at,this.tasksServices.updateTask(this.task.id,this.taskForm.value).subscribe((function(){t.alerts.showAlert("Yeah!","The task was updated successfully!","success").then((function(e){(e.value||e.dismiss)&&t.router.navigate(["tasks"])}))}))}},{key:"saveNewTask",value:function(){var t=this;delete this.task.id,delete this.task.created_at;var e=Object.assign(Object.assign({},this.task),this.taskForm.value);e.assignment=this.user.name+" "+this.user.last_name,e.id_user=this.user.id,this.tasksServices.saveTask(e).subscribe((function(){t.alerts.showAlert("Yeah!","The task was added successfully!","success").then((function(e){(e.value||e.dismiss)&&t.router.navigate(["tasks"])}))}))}},{key:"createTaskForm",value:function(){this.taskForm=this.formBuilder.group({id:new l.d(this.task.id,[]),assignment:new l.d({value:this.user.name+" "+this.user.last_name,disabled:!0},[l.n.required]),title:new l.d(this.task.title,[l.n.minLength(4),l.n.maxLength(30)]),description:new l.d(this.task.description,[l.n.minLength(4),l.n.maxLength(100)]),points:new l.d(this.task.points,[l.n.min(1),l.n.max(21)]),created_at:new l.d(this.task.created_at,[]),completed:new l.d(this.task.completed,[]),id_user:[this.task.completed]})}}]),e}()).\u0275fac=function(t){return new(t||n)(u.Jb(m),u.Jb(c.a),u.Jb(c.b),u.Jb(l.c))},n.\u0275cmp=u.Db({type:n,selectors:[["app-task-form"]],decls:35,vars:31,consts:[[1,"col-md-4","mx-auto","left-effect",3,"formGroup"],[1,"text-center"],[1,"form-group"],["for","assignment"],["type","text","id","assignment","name","assignment","formControlName","assignment",1,"form-control"],["for","title"],["type","text","id","title","name","title","formControlName","title",1,"form-control"],[1,"invalid-feedback"],["for","points"],["type","number","min","1","max","21","maxlength","2","id","points","name","points","formControlName","points",1,"form-control"],["for","description"],["type","text","id","description","name","description","formControlName","description",1,"form-control"],[1,"form-check","text-center"],["type","checkbox","name","completed","id","completed","formControlName","completed",1,"form-check-input"],["for","completed"],[1,"btn","btn-success","btn-block",3,"disabled","click"],["type","hidden","id","idHidden",3,"value"],["type","hidden","id","dateHidden",3,"value"]],template:function(t,e){1&t&&(u.Mb(0,"form",0),u.Mb(1,"h3",1),u.hc(2),u.Lb(),u.Kb(3,"hr"),u.Mb(4,"div",2),u.Mb(5,"label",3),u.hc(6,"Assignment"),u.Lb(),u.Kb(7,"input",4),u.Lb(),u.Mb(8,"div",2),u.Mb(9,"label",5),u.hc(10,"Title"),u.Lb(),u.Kb(11,"input",6),u.Mb(12,"div",7),u.hc(13),u.Lb(),u.Lb(),u.Mb(14,"div",2),u.Mb(15,"label",8),u.hc(16,"Points"),u.Lb(),u.Kb(17,"input",9),u.Mb(18,"div",7),u.hc(19),u.Lb(),u.Lb(),u.Mb(20,"div",2),u.Mb(21,"label",10),u.hc(22,"Description"),u.Lb(),u.Kb(23,"textarea",11),u.Mb(24,"div",7),u.hc(25),u.Lb(),u.Lb(),u.Mb(26,"div",12),u.Kb(27,"input",13),u.Mb(28,"label",14),u.hc(29,"Completed"),u.Lb(),u.Lb(),u.Mb(30,"button",15),u.Tb("click",(function(){return e.edit?e.updateTask():e.saveNewTask()})),u.Kb(31,"i"),u.hc(32),u.Lb(),u.Kb(33,"input",16),u.Kb(34,"input",17),u.Lb()),2&t&&(u.Zb("formGroup",e.taskForm),u.xb(2),u.ic(e.edit?"Edit task":"New task"),u.xb(5),u.Bb("is-invalid",e.taskForm.get("assignment").invalid)("is-valid",e.taskForm.get("assignment").value),u.xb(4),u.Bb("is-invalid",e.taskForm.get("title").invalid)("is-valid",e.taskForm.get("title").valid&&e.taskForm.get("title").value),u.xb(2),u.kc(" ",e.taskForm.get("title").hasError("minlength")?"The title too short":""," ",e.taskForm.get("title").hasError("maxlength")?"The maximum length is 30 characters":""," "),u.xb(4),u.Bb("is-invalid",e.taskForm.get("points").invalid)("is-valid",e.taskForm.get("points").valid&&e.taskForm.get("points").value),u.xb(2),u.kc(" ",e.taskForm.get("points").hasError("min")?"Very few points!":""," ",e.taskForm.get("points").hasError("max")?"Too many points!":""," "),u.xb(4),u.Bb("is-invalid",e.taskForm.get("description").invalid)("is-valid",e.taskForm.get("description").valid&&e.taskForm.get("description").value),u.xb(2),u.kc(" ",e.taskForm.get("description").hasError("minlength")?"The description too short":""," ",e.taskForm.get("description").hasError("maxlength")?"The maximum length is 100 characters":""," "),u.xb(5),u.Zb("disabled",e.taskForm.invalid||!e.taskForm.get("assignment").value||!e.taskForm.get("title").value||!e.taskForm.get("points").value||!e.taskForm.get("description").value),u.xb(1),u.zb(e.edit?"zmdi zmdi-refresh zmdi-hc-lg":"zmdi zmdi-save zmdi-hc-lg"),u.xb(1),u.jc(" ",e.edit?" Update":" Save"," "),u.xb(1),u.ac("value",e.taskForm.get("id").value),u.xb(1),u.ac("value",e.taskForm.get("created_at").value))},directives:[l.p,l.j,l.f,l.b,l.i,l.e,l.l,l.h,l.a],styles:[""]}),n);function p(t,e){if(1&t){var i=u.Nb();u.Mb(0,"div",2),u.hc(1," Backlog empty "),u.Mb(2,"a",3),u.Tb("click",(function(){return u.cc(i),u.Wb().addTask()})),u.hc(3," add a task"),u.Lb(),u.hc(4," to the list!\n"),u.Lb()}}function v(t,e){if(1&t){var i=u.Nb();u.Mb(0,"div",4),u.Mb(1,"div",5),u.Mb(2,"div",6),u.Mb(3,"a"),u.hc(4),u.Lb(),u.Mb(5,"button",7),u.Tb("click",(function(){u.cc(i);var t=e.$implicit;return u.Wb().deleteTask(t.id)})),u.Kb(6,"i",8),u.hc(7," Delete "),u.Lb(),u.Lb(),u.Mb(8,"div",9),u.Mb(9,"h3",10),u.hc(10),u.Lb(),u.Mb(11,"h5",11),u.hc(12),u.Lb(),u.Mb(13,"h5",12),u.hc(14),u.Lb(),u.Mb(15,"h4",13),u.hc(16),u.Xb(17,"date"),u.Lb(),u.Mb(18,"h5",14),u.hc(19),u.Lb(),u.Lb(),u.Mb(20,"div",15),u.Mb(21,"button",16),u.Tb("click",(function(){u.cc(i);var t=e.$implicit;return u.Wb().editTask(t.id)})),u.Kb(22,"i",17),u.hc(23," Edit "),u.Lb(),u.Lb(),u.Kb(24,"input",18),u.Kb(25,"input",19),u.Lb(),u.Lb()}if(2&t){var s=e.$implicit;u.xb(4),u.ic(s.title),u.xb(6),u.ic(s.assignment),u.xb(2),u.jc("",s.points," points"),u.xb(2),u.ic(s.description),u.xb(2),u.jc(" ",u.Yb(17,8,s.created_at,"dd-MM-yyyy hh:mm")," "),u.xb(3),u.ic(s.completed?"Completed":"Incomplete"),u.xb(5),u.ac("value",s.id),u.xb(1),u.ac("value",s.created_at)}}var f,g,y,L=((f=function(){function e(i,s){t(this,e),this.tasksServices=i,this.router=s,this.classes="row",this.tasks=[],this.user={},this.alerts=new d.a}return i(e,[{key:"ngOnInit",value:function(){this.getUserTasks()}},{key:"getUserTasks",value:function(){var t=this;this.user=JSON.parse(localStorage.getItem("userLogged")),this.tasksServices.getUserTasks(this.user.username,this.user.id).subscribe((function(e){t.tasks=e}))}},{key:"deleteTask",value:function(t){var e=this;this.alerts.showAlertConfirm("Are you sure?","Once deleted, you will not be able to recover this task!","warning").then((function(i){i.value&&(e.tasksServices.deleteTask(t).subscribe((function(t){console.log(t),e.getUserTasks()})),e.alerts.showAlert("Yeah!","Task was deleted!","success"))}))}},{key:"editTask",value:function(t){this.router.navigateByUrl("tasks/edit/"+t)}},{key:"addTask",value:function(){this.router.navigate(["tasks/add"])}}]),e}()).\u0275fac=function(t){return new(t||f)(u.Jb(m),u.Jb(c.b))},f.\u0275cmp=u.Db({type:f,selectors:[["app-task-list"]],hostVars:2,hostBindings:function(t,e){2&t&&u.zb(e.classes)},decls:2,vars:2,consts:[["class","alert alert-info text-center col-md-12","role","alert",4,"ngIf"],["class","col-md-4",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-info","text-center","col-md-12"],[1,"alert-link",2,"cursor","pointer",3,"click"],[1,"col-md-4"],[1,"card"],[1,"card-header","bg-dark","text-white","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"zmdi","zmdi-delete","zmdi-hc-lg"],[1,"card-body"],["id","assignment"],["id","points"],["id","description"],["id","created_at"],["id","completed"],[1,"card-footer"],[1,"btn","btn-info","btn-block",3,"click"],[1,"zmdi","zmdi-edit","zmdi-hc-lg"],["type","hidden","id","idHidden",3,"value"],["type","hidden","id","dateHidden",3,"value"]],template:function(t,e){1&t&&(u.gc(0,p,5,0,"div",0),u.gc(1,v,26,11,"div",1)),2&t&&(u.Zb("ngIf",e.tasks.length<1),u.xb(1),u.Zb("ngForOf",e.tasks))},directives:[o.j,o.i],pipes:[o.d],styles:[""]}),f),x=a("BhFI"),T=[{path:"",component:L,canActivate:[x.a]},{path:"add",component:k,canActivate:[x.a]},{path:"edit/:id",component:k,canActivate:[x.a]}],w=((y=function e(){t(this,e)}).\u0275mod=u.Hb({type:y}),y.\u0275inj=u.Gb({factory:function(t){return new(t||y)},imports:[[c.f.forChild(T)],c.f]}),y),F=((g=function e(){t(this,e)}).\u0275mod=u.Hb({type:g}),g.\u0275inj=u.Gb({factory:function(t){return new(t||g)},imports:[[o.b,w,l.g,l.m]]}),g)}}])}();