!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3aSD":function(t,a,n){"use strict";n.r(a),n.d(a,"GamesModule",(function(){return F}));var r,s,o=n("ofXK"),c=n("3Pt+"),m=n("tyNb"),d=n("BhFI"),l=n("ZLyn"),u=n("fXoL"),g=n("AytR"),h=n("tk/3"),b=((s=function(){function t(i){e(this,t),this.http=i}return i(t,[{key:"getGames",value:function(){return this.http.get(g.a.API_URL+"/games")}},{key:"getUserGames",value:function(e,t){return this.http.get(g.a.API_URL+"/games/"+e+"/"+t)}},{key:"getGame",value:function(e){return this.http.get(g.a.API_URL+"/games/"+e)}},{key:"deleteGame",value:function(e){return this.http.delete(g.a.API_URL+"/games/"+e)}},{key:"saveGame",value:function(e){return this.http.post(g.a.API_URL+"/games/",e)}},{key:"updateGame",value:function(e,t){return this.http.put(g.a.API_URL+"/games/"+e,t)}}]),t}()).\u0275fac=function(e){return new(e||s)(u.Qb(h.a))},s.\u0275prov=u.Fb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),v=((r=function(){function t(i,a,n,r){e(this,t),this.gamesServices=i,this.activatedRouted=a,this.router=n,this.formBuilder=r,this.alerts=new l.a,this.game={},this.user={},this.user=JSON.parse(localStorage.getItem("userLogged"))}return i(t,[{key:"ngOnInit",value:function(){var e=this,t=this.activatedRouted.snapshot.params;t.id&&this.gamesServices.getGame(Number(t.id)).subscribe((function(t){e.game=t,e.gameForm.setValue(e.game),e.edit=!0}),(function(){return e.alerts.showAlert("Error","Game not found!","error").then((function(t){(t.value||t.dismiss)&&e.router.navigate(["games"])}))})),this.createGameForm()}},{key:"updateGame",value:function(){var e=this;delete this.game.created_at,this.gamesServices.updateGame(this.game.id,this.gameForm.value).subscribe((function(){e.alerts.showAlert("Yeah!","The game was updated successfully!","success").then((function(t){(t.value||t.dismiss)&&e.router.navigate(["games"])}))}))}},{key:"saveNewGame",value:function(){var e=this;delete this.game.id,delete this.game.created_at;var t=Object.assign(Object.assign({},this.game),this.gameForm.value);t.id_user=this.user.id,this.gamesServices.saveGame(t).subscribe((function(){e.alerts.showAlert("Yeah!","The game was added successfully!","success").then((function(t){(t.value||t.dismiss)&&e.router.navigate(["games"])}))}))}},{key:"createGameForm",value:function(){this.gameForm=this.formBuilder.group({id:new c.d(this.game.id,[]),title:new c.d(this.game.title,[c.n.minLength(4),c.n.maxLength(15)]),description:new c.d(this.game.description,[c.n.minLength(4),c.n.maxLength(50)]),image:new c.d(this.game.image,[c.n.minLength(4),c.n.maxLength(200)]),created_at:new c.d(this.game.created_at,[]),id_user:new c.d(this.game.id_user,[])})}}]),t}()).\u0275fac=function(e){return new(e||r)(u.Jb(b),u.Jb(m.a),u.Jb(m.b),u.Jb(c.c))},r.\u0275cmp=u.Db({type:r,selectors:[["app-game-form"]],decls:27,vars:27,consts:[[1,"col-md-4","mx-auto","right-effect",3,"formGroup"],[1,"text-center"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","formControlName","title",1,"form-control"],[1,"invalid-feedback"],["for","description"],["type","text","id","description","name","description","formControlName","description",1,"form-control"],["for","image"],["type","url","id","image","name","image","formControlName","image",1,"form-control"],[1,"btn","btn-success","btn-block",3,"disabled","click"],["type","hidden","id","idHidden",3,"value"],["type","hidden","id","dateHidden",3,"value"]],template:function(e,t){1&e&&(u.Mb(0,"form",0),u.Mb(1,"h3",1),u.hc(2),u.Lb(),u.Kb(3,"hr"),u.Mb(4,"div",2),u.Mb(5,"label",3),u.hc(6,"Title"),u.Lb(),u.Kb(7,"input",4),u.Mb(8,"div",5),u.hc(9),u.Lb(),u.Lb(),u.Mb(10,"div",2),u.Mb(11,"label",6),u.hc(12,"Description"),u.Lb(),u.Kb(13,"input",7),u.Mb(14,"div",5),u.hc(15),u.Lb(),u.Lb(),u.Mb(16,"div",2),u.Mb(17,"label",8),u.hc(18,"Image"),u.Lb(),u.Kb(19,"input",9),u.Mb(20,"div",5),u.hc(21),u.Lb(),u.Lb(),u.Mb(22,"button",10),u.Tb("click",(function(){return t.edit?t.updateGame():t.saveNewGame()})),u.Kb(23,"i"),u.hc(24),u.Lb(),u.Kb(25,"input",11),u.Kb(26,"input",12),u.Lb()),2&e&&(u.Zb("formGroup",t.gameForm),u.xb(2),u.ic(t.edit?"Edit game":"New game"),u.xb(5),u.Bb("is-invalid",t.gameForm.get("title").invalid)("is-valid",t.gameForm.get("title").valid&&t.gameForm.get("title").value),u.xb(2),u.kc(" ",t.gameForm.get("title").hasError("minlength")?"The title too short":""," ",t.gameForm.get("title").hasError("maxlength")?"The maximum length is 15 characters":""," "),u.xb(4),u.Bb("is-invalid",t.gameForm.get("description").invalid)("is-valid",t.gameForm.get("description").valid&&t.gameForm.get("description").value),u.xb(2),u.kc(" ",t.gameForm.get("description").hasError("minlength")?"The description too short":""," ",t.gameForm.get("description").hasError("maxlength")?"The maximum length is 50 characters":""," "),u.xb(4),u.Bb("is-invalid",t.gameForm.get("image").invalid)("is-valid",t.gameForm.get("image").valid&&t.gameForm.get("image").value),u.xb(2),u.kc(" ",t.gameForm.get("image").hasError("minlength")?"The image too short":""," ",t.gameForm.get("image").hasError("maxlength")?"The maximum length is 50 characters":""," "),u.xb(1),u.Zb("disabled",t.gameForm.invalid||!t.gameForm.get("title").value||!t.gameForm.get("description").value||!t.gameForm.get("image").value),u.xb(1),u.Ab(" ",t.edit?"zmdi zmdi-refresh zmdi-hc-lg":"zmdi zmdi-save zmdi-hc-lg"," "),u.xb(1),u.jc(" ",t.edit?" Update ":" Save "," "),u.xb(1),u.ac("value",t.gameForm.get("id").value),u.xb(1),u.ac("value",t.gameForm.get("created_at").value))},directives:[c.p,c.j,c.f,c.b,c.i,c.e],styles:[""]}),r);function f(e,t){if(1&e){var i=u.Nb();u.Mb(0,"div",2),u.hc(1," L\xedst empty "),u.Mb(2,"a",3),u.Tb("click",(function(){return u.cc(i),u.Wb().navigate()})),u.hc(3," add a game"),u.Lb(),u.hc(4," to the list!\n"),u.Lb()}}function p(e,t){if(1&e){var i=u.Nb();u.Mb(0,"div",4),u.Mb(1,"div",5),u.Mb(2,"div",6),u.Mb(3,"a"),u.hc(4),u.Lb(),u.Mb(5,"button",7),u.Tb("click",(function(){u.cc(i);var e=t.$implicit;return u.Wb().deleteGame(e.id)})),u.Kb(6,"i",8),u.hc(7," Delete "),u.Lb(),u.Lb(),u.Mb(8,"div",9),u.Kb(9,"img",10),u.Mb(10,"h6",11),u.hc(11),u.Lb(),u.Mb(12,"h5",12),u.hc(13),u.Xb(14,"date"),u.Lb(),u.Lb(),u.Mb(15,"div",13),u.Mb(16,"button",14),u.Tb("click",(function(){u.cc(i);var e=t.$implicit;return u.Wb().editGame(e.id)})),u.Kb(17,"i",15),u.hc(18," Edit "),u.Lb(),u.Lb(),u.Kb(19,"input",16),u.Kb(20,"input",17),u.Lb(),u.Lb()}if(2&e){var a=t.$implicit;u.xb(4),u.ic(a.title),u.xb(5),u.Zb("src",a.image,u.dc),u.xb(2),u.ic(a.description),u.xb(2),u.jc(" ",u.Yb(14,6,a.created_at,"dd-MM-yyyy hh:mm")," "),u.xb(6),u.ac("value",a.id),u.xb(1),u.ac("value",a.created_at)}}var y,L,w,x=[{path:"",component:(y=function(){function t(i,a){e(this,t),this.gamesService=i,this.router=a,this.classes="row",this.games=[],this.user={},this.alerts=new l.a,this.user=JSON.parse(localStorage.getItem("userLogged"))}return i(t,[{key:"ngOnInit",value:function(){this.getUserGames()}},{key:"getUserGames",value:function(){var e=this;this.gamesService.getUserGames(this.user.username,this.user.id).subscribe((function(t){e.games=t}))}},{key:"deleteGame",value:function(e){var t=this;this.alerts.showAlertConfirm("Are you sure?","Once deleted, you will not be able to recover this game!","warning").then((function(i){i.value&&(t.gamesService.deleteGame(e).subscribe((function(){t.getUserGames()})),t.alerts.showAlert("Yeah!","Game was deleted!","success").then())}))}},{key:"editGame",value:function(e){this.router.navigateByUrl("games/edit/"+e)}},{key:"navigate",value:function(){this.router.navigate(["games/add"])}}]),t}(),y.\u0275fac=function(e){return new(e||y)(u.Jb(b),u.Jb(m.b))},y.\u0275cmp=u.Db({type:y,selectors:[["app-game-list"]],hostVars:2,hostBindings:function(e,t){2&e&&u.zb(t.classes)},decls:2,vars:2,consts:[["class","alert alert-info text-center col-md-12","role","alert",4,"ngIf"],["class","col-md-4",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-info","text-center","col-md-12"],[1,"alert-link",2,"cursor","pointer",3,"click"],[1,"col-md-4"],[1,"card"],[1,"card-header","bg-dark","text-white","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"zmdi","zmdi-delete","zmdi-hc-lg"],[1,"card-body"],["height","400px",1,"card-img-top",3,"src"],["id","description",2,"margin-top","15px"],["id","created_at"],[1,"card-footer"],[1,"btn","btn-info","btn-block",3,"click"],[1,"zmdi","zmdi-edit","zmdi-hc-lg"],["type","hidden","id","idHidden",3,"value"],["type","hidden","id","dateHidden",3,"value"]],template:function(e,t){1&e&&(u.gc(0,f,5,0,"div",0),u.gc(1,p,21,9,"div",1)),2&e&&(u.Zb("ngIf",t.games.length<1),u.xb(1),u.Zb("ngForOf",t.games))},directives:[o.j,o.i],pipes:[o.d],styles:[""]}),y),canActivate:[d.a]},{path:"add",component:v,canActivate:[d.a]},{path:"edit/:id",component:v,canActivate:[d.a]}],k=((w=function t(){e(this,t)}).\u0275mod=u.Hb({type:w}),w.\u0275inj=u.Gb({factory:function(e){return new(e||w)},imports:[[m.f.forChild(x)],m.f]}),w),F=((L=function t(){e(this,t)}).\u0275mod=u.Hb({type:L}),L.\u0275inj=u.Gb({factory:function(e){return new(e||L)},imports:[[o.b,k,c.g,c.m]]}),L)}}])}();